(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class u{static#t=null;static current(){return u.#t}static __setCurrent(t){u.#t=t}canvas;ctx;size=2048;scale=this.size/200;penOpacity=1;stroke="rgba(0,0,0,1)";onDrawLine;constructor(t,e){if(this.onDrawLine=e,e)this.canvas=null,this.ctx=null;else{this.canvas=t??this.#e(),this.canvas.width=this.size,this.canvas.height=this.size;const i=this.canvas.getContext?.("2d");if(!i)throw new Error("2D canvas context unavailable.");this.ctx=i,i.lineWidth=2,i.lineCap="round",i.lineJoin="round",i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.save(),i.fillStyle="#fff",i.fillRect(0,0,this.size,this.size),i.restore(),this._updateStroke()}}setPenOpacity(t){this.penOpacity=t,this.ctx&&(this.ctx.save(),this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle=t<0?"#000":"#fff",this.ctx.fillRect(0,0,this.size,this.size),this.ctx.restore(),this._updateStroke())}drawLine(t,e,i,s){if(this.onDrawLine)this.onDrawLine(t,e,i,s);else if(this.ctx){const[n,o]=this.worldToCanvas(t,e),[a,c]=this.worldToCanvas(i,s);this.ctx.beginPath(),this.ctx.moveTo(n,o),this.ctx.lineTo(a,c),this.ctx.strokeStyle=this.stroke,this.ctx.stroke()}}worldToCanvas(t,e){const i=(t+100)*this.scale,s=(e+100)*this.scale;return[i,s]}_updateStroke(){const t=Math.min(1,Math.max(0,Math.abs(this.penOpacity))),e=this.penOpacity<0?255:0;this.stroke=`rgba(${e},${e},${e},${t})`}#e(){if(typeof document<"u"&&typeof document.createElement=="function")return document.createElement("canvas");throw new Error("No canvas provided and DOM not available to create one.")}}const d=(()=>{let r=null,t=!1;return{__attachRuntime(e){r=e},setpenopacity(e){if(!r)throw new Error("Canvas not initialized. Call turtleDraw(...) first.");if(t)return;t=!0;const i=Math.max(-1,Math.min(1,e));r.setPenOpacity(i)},get element(){return r?.canvas??null}}})();class f{engine;_x=0;_y=0;_h=0;_pen=!1;_fullCircle=360;constructor(t,e){const i=u.current();if(!i)throw new Error("No active engine. Call turtleDraw(...) to run user code.");this.engine=i,this.goto(t||0,e||0),this.pendown()}forward(t){const e=this.x()+t*Math.cos(this._h),i=this.y()+t*Math.sin(this._h);this.goto(e,i)}backward(t){this.forward(-t)}right(t){this._h+=this.toradians(t)}left(t){this.right(-t)}pendown(){this._pen=!0}penup(){this._pen=!1}degrees(t){this._fullCircle=t||360}radians(){this.degrees(Math.PI*2)}goto(t,e){const i=this._x,s=this._y;Array.isArray(t)?(this._x=t[0],this._y=t[1]):(this._x=t||0,this._y=e||0),this._pen&&this.engine.drawLine(i,s,this._x,this._y)}jump(t,e){if(Array.isArray(t)){if(this.x()===t[0]&&this.y()===t[1])return}else if(this.x()===t&&this.y()===e)return;const i=this.isdown();this.penup(),this.goto(t,e),i&&this.pendown()}setx(t){this.goto(t,this.y())}sety(t){this.goto(this.x(),t)}toradians(t){return t*(Math.PI*2/this._fullCircle)}setheading(t){this._h=this.toradians(t)}home(){this.penup(),this.goto(0,0),this.seth(0),this.pendown()}circle(t,e,i){e||(e=this._fullCircle);const s=this.toradians(e);i||(i=Math.round(Math.abs(t*s*8))|0,i=Math.max(i,4));const n=this.x()+t*Math.cos(this._h+Math.PI/2),o=this.y()+t*Math.sin(this._h+Math.PI/2),a=Math.atan2(this.y()-o,this.x()-n),c=t>=0?a+s:a-s;for(let l=0;l<i;l++){const h=l/(i-1),p=a+(c-a)*h,g=n+Math.abs(t)*Math.cos(p),m=o+Math.abs(t)*Math.sin(p);this.goto(g,m)}t>=0?this._h+=s:this._h-=s}position(){return[this._x,this._y]}xcor(){return this.position()[0]}ycor(){return this.position()[1]}heading(){return this._h/(Math.PI*2)*this._fullCircle}isdown(){return this._pen}clone(){const t=new f(this.x(),this.y());return t.degrees(this._fullCircle),t.seth(this.heading()),t}distance(t,e=0){return[t,e]=Array.isArray(t)?t:[t,e],Math.hypot(t-this.x(),e-this.y())}towards(t,e=0){return t instanceof f?[t,e]=[t.x(),t.y()]:Array.isArray(t)&&([t,e]=t),((Math.atan2(e-this.y(),t-this.x())-this._h)/(Math.PI*2)%1+1)%1*this._fullCircle}fullCircle(){return this._fullCircle}fd(t){this.forward(t)}bk(t){this.backward(t)}back(t){this.backward(t)}lt(t){this.left(t)}rt(t){this.right(t)}pd(){this.pendown()}down(){this.pendown()}pu(){this.penup()}up(){this.penup()}setposition(t,e){this.goto(t,e)}setpos(t,e){this.goto(t,e)}jmp(t,e){this.jump(t,e)}seth(t){this.setheading(t)}pos(){return this.position()}x(){return this.xcor()}y(){return this.ycor()}h(){return this.heading()}}function _(r,t={}){const e=new u(t.htmlcanvas,t.onDrawLine);d.__attachRuntime(e),u.__setCurrent(e);const i=typeof r=="function"?v(r):String(r),s=new Function("Canvas","Turtle",`
  ${i}
  return { walk: (typeof walk === "function") ? walk : null };`),{walk:n}=s(d,f);let o=!1,a=0;const c=t.maxSteps??1e6,l=()=>{if(o||!n)return!1;try{if(n(a++,1)===!1||a>=c)return o=!0,!1}catch(h){return t.onStepError?.(h,a),o=!0,!1}return!0};if(n)if(t.raf&&typeof requestAnimationFrame<"u"){const h=()=>{if(o)return;const p=performance.now();for(;performance.now()-p<10&&l(););!o&&a<c&&requestAnimationFrame(h)};requestAnimationFrame(h)}else for(;l(););return{canvas:e.canvas,stop(){o=!0}}}function v(r){const t=r.toString();return t.slice(t.indexOf("{")+1,t.lastIndexOf("}"))}const{canvas:y}=_(()=>{d.setpenopacity(1);const r=new f;r.penup(),r.goto(-50,-20),r.pendown()},{raf:!0}),w=document.querySelector("#app");w&&y&&w.appendChild(y);
